/**
 * Unified Dropdown Styles
 * 
 * This file provides standardized styling for dropdown menus and 
 * ensures they appear consistently above other elements.
 */

/* ======== Dropdown Base ======== */
.cosmic-dropdown {
  position: relative;
  display: inline-block;
}

/* ======== Dropdown Content ======== */
.cosmic-dropdown-content {
  position: absolute;
  z-index: var(--z-dropdown) !important; /* Ensure dropdown appears above other elements */
  background-color: rgba(var(--color-card), 0.95);
  min-width: 180px;
  border-radius: var(--radius-md);
  border: 1px solid rgba(var(--color-border), 0.2);
  box-shadow: var(--shadow-lg);
  backdrop-filter: blur(8px);
  overflow: hidden;
  transition: opacity var(--duration-normal) ease, transform var(--duration-normal) ease;
}

/* Ensure shadcn dropdown content has proper z-index */
[data-radix-popper-content-wrapper] {
  z-index: var(--z-dropdown) !important; /* Override any existing z-index */
}

/* Style specifically for shadcn DropdownMenuContent */
[role="menu"] {
  z-index: var(--z-dropdown) !important;
  background-color: rgba(var(--color-card), 0.95) !important;
  border: 1px solid rgba(var(--color-border), 0.2) !important;
  box-shadow: var(--shadow-lg) !important;
  backdrop-filter: blur(8px) !important;
}

/* ======== Dropdown Item ======== */
.cosmic-dropdown-item {
  padding: var(--space-2) var(--space-4);
  color: rgb(var(--color-text));
  display: flex;
  align-items: center;
  gap: var(--space-2);
  cursor: pointer;
  transition: background-color var(--duration-fast) ease;
  font-size: 0.875rem;
}

.cosmic-dropdown-item:hover {
  background-color: rgba(var(--color-primary), 0.1);
}

.cosmic-dropdown-item:active {
  background-color: rgba(var(--color-primary), 0.2);
}

/* Style specifically for shadcn DropdownMenuItem */
[role="menuitem"] {
  padding: var(--space-2) var(--space-3) !important;
  color: rgb(var(--color-text)) !important;
  display: flex !important;
  align-items: center !important;
  cursor: pointer !important;
  transition: background-color var(--duration-fast) ease !important;
}

[role="menuitem"]:hover {
  background-color: rgba(var(--color-primary), 0.1) !important;
}

[role="menuitem"]:focus {
  background-color: rgba(var(--color-primary), 0.15) !important;
  outline: none !important;
}

/* ======== Dropdown Divider ======== */
.cosmic-dropdown-divider {
  height: 1px;
  margin: var(--space-1) 0;
  background-color: rgba(var(--color-border), 0.2);
}

/* Style specifically for shadcn DropdownMenuSeparator */
[role="separator"] {
  height: 1px !important;
  margin: var(--space-1) 0 !important;
  background-color: rgba(var(--color-border), 0.2) !important;
}

/* ======== Dropdown Header ======== */
.cosmic-dropdown-header {
  padding: var(--space-2) var(--space-4);
  font-size: 0.75rem;
  font-weight: 600;
  color: rgb(var(--color-muted));
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* ======== Dropdown Animation ======== */
.cosmic-dropdown-enter {
  opacity: 0;
  transform: translateY(-5px);
}

.cosmic-dropdown-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity var(--duration-normal) ease, transform var(--duration-normal) ease;
}

.cosmic-dropdown-exit {
  opacity: 1;
  transform: translateY(0);
}

.cosmic-dropdown-exit-active {
  opacity: 0;
  transform: translateY(-5px);
  transition: opacity var(--duration-normal) ease, transform var(--duration-normal) ease;
}

/* ======== Responsive Dropdowns ======== */
@media (max-width: 640px) {
  .cosmic-dropdown-content {
    width: 100%;
    min-width: 100%;
    position: fixed;
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: var(--radius-md) var(--radius-md) 0 0;
    transform-origin: bottom center;
  }
  
  .cosmic-dropdown-enter {
    transform: translateY(100%);
  }
  
  .cosmic-dropdown-exit-active {
    transform: translateY(100%);
  }
}

/* ======== Professional Theme Variant ======== */
:root[data-theme-variant="professional"] .cosmic-dropdown-content,
:root[data-theme-variant="professional"] [role="menu"] {
  background-color: rgb(var(--color-card));
  box-shadow: var(--shadow-md);
  backdrop-filter: blur(4px);
}

/* ======== Vibrant Theme Variant ======== */
:root[data-theme-variant="vibrant"] .cosmic-dropdown-content,
:root[data-theme-variant="vibrant"] [role="menu"] {
  background: linear-gradient(
    135deg,
    rgba(var(--color-card), 0.75) 0%,
    rgba(var(--color-primary), 0.05) 100%
  );
  border-width: 1px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2), 
              0 0 15px rgba(var(--color-primary), 0.1);
  backdrop-filter: blur(12px);
}

:root[data-theme-variant="vibrant"] .cosmic-dropdown-item:hover,
:root[data-theme-variant="vibrant"] [role="menuitem"]:hover {
  background-color: rgba(var(--color-primary), 0.15);
}

/* ======== Tint Theme Variant ======== */
:root[data-theme-variant="tint"] .cosmic-dropdown-content,
:root[data-theme-variant="tint"] [role="menu"] {
  border-radius: 0;
  border-top: 2px solid rgb(var(--color-primary));
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  background-color: rgb(var(--color-card));
}

/* Ensure dropdown is above navbar for all themes */
.dropdown-above-navbar, 
[data-radix-popper-content-wrapper] {
  z-index: var(--z-dropdown) !important;
  position: relative;
}